@startuml
!include <C4/C4_Context>

title Контекстная диаграмма системы "Тёплый дом" (As-Is)

Person(пользователь, "Пользователь", "Владелец дома, управляющий отоплением через веб-клиент")
Person(специалист, "Специалист по подключению", "Сотрудник компании, подключающий устройства к системе")

System(монолит, "Монолитное приложение 'Тёплый дом'", "Java-приложение, содержащее всю логику по управлению отоплением, устройствами, пользователями и т.д.")

SystemDb(постгрес, "PostgreSQL", "СУБД для хранения данных о пользователях, устройствах, событиях, сценариях")

System(устройства, "Устройства (Датчики, Реле)", "Датчики температуры, реле отопления, устройства безопасности (пока всё внутри одного взаимодействия)")

' Основные взаимодействия
Rel(пользователь, монолит, "Управляет отоплением и устройствами через веб-клиент", "HTTPS")
Rel(специалист, монолит, "Подключает устройства вручную", "Внутренний интерфейс / настройки")
Rel(монолит, устройства, "Получает данные и управляет устройствами (синхронно)", "Прямое подключение (HTTP/MQTT)")
Rel(монолит, постгрес, "Хранит данные пользователей, устройств, сценариев", "JDBC")
@enduml